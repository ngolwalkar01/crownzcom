"use strict";function deleteSncFromTableContent(t,e){var i;confirm("Do you really want to delete this?")&&(i={action:"SnC_Content_Delete",item_id:t,mode:e,security:jQuery('#snc-content_library_wrap input[name="security"]').val()},jQuery.post(ajaxurl,i,()=>{"media library"===e||"vc"===e?jQuery('#snc-content_library_wrap table tr[data-item_id="'.concat(t,'"]')).remove():location.reload()}))}function deleteSncFromTable(t,e){var i;confirm("Do you really want to delete this?")&&(i={action:"SnC_Media_Delete",item_id:t,mode:e,security:jQuery('form.snc-media_enbed_form input[name="security"]').val()},jQuery.post(ajaxurl,i,()=>{"media library"===e||"vc"===e?jQuery('#snc-content_library_wrap table tr[data-item_id="'.concat(t,'"]')).remove():location.reload()}))}var tincannyMediaUpload;jQuery(document).ready(i=>{var t="#snc-content_library_wrap table";i("".concat(t," a.content_title, ").concat(t," a.show")).click(function(t){t.preventDefault();var e=i(this).attr("data-item_id");i(".embed_information").each(function(){var t=i(this).attr("data-item_id");e!==t?i(this).hide():i(this).toggle()})})}),jQuery(document).ready(n=>{n("#snc-content_library_wrap table a.delete").click(function(t){t.preventDefault();t=n("#snc-content_library_wrap").length?"media library":"upload form";deleteSncFromTableContent(n(this).attr("data-item_id"),t)});var i="";n("#snc-content_library_wrap table a.snc_replace_confirm").click(function(t){t.preventDefault();t=n(this).data("item_id");n("#snc-delete-book-only").data("item_id",t),n("#snc-delete-all-data").data("item_id",t),n("#replace_placeholder").attr("href","media-upload.php?content_id="+t+"&type=snc&tab=upload&min-height=400&no_tab=1&TB_iframe=true").attr("data-item_id",t)}),n(".tclr-replace-content__task-btn").on("click",function(){var t=n(this).data("task");n(".tclr-replace-content__step-1").hide(),n(".tclr-replace-content__step-2").show(),n("#bookmark-confirmation, #all-confirmation").hide(),"remove-bookmark"===t?n("#bookmark-confirmation").show():"remove-all-data"===t&&n("#all-confirmation").show()}),n(".tclr-replace-content__cancel-2-step-btn").on("click",function(){n("#bookmark-confirmation, #all-confirmation").hide(),n(".tclr-replace-content__step-1").show(),n(".tclr-replace-content__step-2").hide()}),n("#snc-delete-book-only").click(function(){var t=n(this),e=(i=n(this).data("item_id"),t.addClass("tclr-btn--loading"),n("#snc-content_library_wrap").length?"media library":"upload form"),e={action:"SnC_Content_Bookmark_Delete",item_id:i,mode:e,security:n('#snc-content_library_wrap input[name="security"]').val()};n.post(ajaxurl,e).done(function(){t.removeClass("tclr-btn--loading"),n(".tclr-replace-content__step-1").show(),n(".tclr-replace-content__step-2").hide(),n("#TB_closeWindowButton").trigger("click"),setTimeout(function(){n("#replace_placeholder").trigger("click")},1e3)})}),n("#snc-delete-all-data").click(function(){var t=n(this),e=(i=n(this).data("item_id"),t.addClass("tclr-btn--loading"),n("#snc-content_library_wrap").length?"media library":"upload form"),e={action:"SnC_Content_Delete_All",item_id:i,mode:e,security:n('#snc-content_library_wrap input[name="security"]').val()};n.post(ajaxurl,e).done(function(){t.removeClass("tclr-btn--loading"),n(".tclr-replace-content__step-1").show(),n(".tclr-replace-content__step-2").hide(),n("#TB_closeWindowButton").trigger("click"),setTimeout(function(){n("#replace_placeholder").trigger("click")},1e3)})}),{init:function(){this.getElements(),this.getData(),this.initFuse(),this.listenSearchField()},getElements:function(){this.$elements={searchField:n("#tclr-classic-editor-content-library-search"),tableContainer:n(".tclr-classic-editor-content-library__list"),tableItems:n(".tclr-classic-editor-content-library__list tbody tr.tclr-classic-editor-content-library__item")}},getData:function(){var i=[];n.each(this.$elements.tableItems,function(t,e){e=n(e),e={title:e.data("item_name"),$element:e};i.push(e)}),this.items=i},initFuse:function(){this.Fuse=new Fuse(this.items,{keys:["title"],threshold:0,ignoreLocation:!0})},listenSearchField:function(){var e=this;this.$elements.searchField.on("input",function(){var t=e.$elements.searchField.val();""!==t?e.search(t):e.showAll()})},search:function(t){t=this.Fuse.search(t);this.$elements.tableContainer.addClass("tclr-classic-editor-content-library__list--search-mode"),this.$elements.tableItems.removeClass("tclr-classic-editor-content-library__item--visible"),0<t.length?(this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--no-results"),t.forEach(function(t){t.item.$element.addClass("tclr-classic-editor-content-library__item--visible")})):this.$elements.tableContainer.addClass("tclr-classic-editor-content-library__list--no-results")},showAll:function(){this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--search-mode"),this.$elements.tableItems.removeClass("tclr-classic-editor-content-library__item--visible"),this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--no-results")}}.init()}),jQuery(document).ready(i=>{i('.insert_type input[type="radio"]').click(function(){var t=i(this).attr("data-item_id");i('form[data-item_id="'.concat(t,'"] .options')).stop().slideUp(),i('form[data-item_id="'.concat(t,'"] .options[data-item_option="').concat(i(this).val(),'"]')).stop().slideDown()}),i('.lightbox_title input[type="radio"]').click(function(){var t=i(this).attr("data-item_id"),e=i(this).val();i('input.text_with_title[data-item_id="'.concat(t,'"]')).hide(),"With Title"===e&&i('input.text_with_title[data-item_id="'.concat(t,'"]')).show().focus()}),i('.lightbox_button input[type="radio"]').click(function(){var t=i(this).attr("data-item_id"),e=i(this).val();i('input.lightbox_button_text[data-item_id="'.concat(t,'"]')).hide(),i('div.lightbox_button_text[data-item_id="'.concat(t,'"]')).hide(),i('section.lightbox_button_custom[data-item_id="'.concat(t,'"]')).hide(),i('input.lightbox_button_url[data-item_id="'.concat(t,'"]')).hide(),"text"!==e&&"small"!==e&&"medium"!==e&&"large"!==e||(i('input.lightbox_button_text[data-item_id="'.concat(t,'"]')).show(),i('div.lightbox_button_text[data-item_id="'.concat(t,'"]')).show()),"url"===e&&i('input.lightbox_button_url[data-item_id="'.concat(t,'"]')).show(),"image"===e&&i('.lightbox_button_custom[data-item_id="'.concat(t,'"]')).show()}),i('input[name="global_lightbox"]').change(function(){var t=i(this).closest(".lightbox_size_options"),e=t.find(".lightbox_width_settings"),t=t.find(".lightbox_height_settings");i(this).is(":checked")?(e.hide(),t.hide()):(e.show(),t.show())}),i('.new_window_option input[type="radio"]').click(function(){var t=i(this).attr("data-item_id"),e=i(this).val();i('.new_window_option[data-item_id="'.concat(t,'"] input[type="text"]')).hide(),i('div._blank_button_text[data-item_id="'.concat(t,'"]')).hide(),i('.new_window_option[data-item_id="'.concat(t,'"] .snc_custom_image_upload')).hide(),"text"!==e&&"small"!==e&&"medium"!==e&&"large"!==e||(i('.new_window_option[data-item_id="'.concat(t,'"] input._blank_text')).show(),i('div._blank_button_text[data-item_id="'.concat(t,'"]')).show()),"image"===e&&i('.new_window_option[data-item_id="'.concat(t,'"] .snc_custom_image_upload')).show(),"url"===e&&i('.new_window_option[data-item_id="'.concat(t,'"] input._blank_url')).show()}),i('.same_window_option input[type="radio"]').click(function(){var t=i(this).attr("data-item_id"),e=i(this).val();i('.same_window_option[data-item_id="'.concat(t,'"] input[type="text"]')).hide(),i('div._self_button_text[data-item_id="'.concat(t,'"]')).hide(),i('.same_window_option[data-item_id="'.concat(t,'"] .snc_custom_image_upload')).hide(),"text"!==e&&"small"!==e&&"medium"!==e&&"large"!==e||(i('.same_window_option[data-item_id="'.concat(t,'"] input._self_text')).show(),i('div._self_button_text[data-item_id="'.concat(t,'"]')).show()),"image"===e&&i('.same_window_option[data-item_id="'.concat(t,'"] .snc_custom_image_upload')).show(),"url"===e&&i('.same_window_option[data-item_id="'.concat(t,'"] input._self_url')).show()}),i("form.snc-media_enbed_form .delete-media, #snc-content_library_wrap table span a.delete").click(function(t){t.preventDefault();t=i("#snc-content_library_wrap").length?"media library":"upload form";deleteSncFromTable(i(this).attr("data-item_id"),t)}),i(".snc_custom_image_upload button").click(function(t){t.preventDefault(),i(this).closest(".snc_custom_image_upload").find('input[type="file"]').click()}),i('.snc_custom_image_upload input[type="file"]').on("change",function(){var t=i(this).closest(".snc_custom_image_upload").find("button .button-description"),e=i(this).val();t.text(e.match(/[^\\/]*$/)[0])})}),jQuery(document).ready(t=>{t(".snc-media_enbed_form").ajaxForm({success:t=>{t=JSON.parse(t);(window.dialogArguments||opener||parent||top).send_to_editor(t.shortcode)}})});class TincannyMediaUploadClass{constructor(t,e){this.$=t,this.isIframe=window.self!==window.top,this.key=e||!1,this.enableButton=!0,this.ids={parentId:"snc-media_upload_file_wrap",uploadWrapperId:"snc-media_upload_tincanny-uploader-wrapper",buttonWrapId:"snc-media_upload_button_wrap",contentID:"content_id",settingsWrapID:"snc-media_upload_settings_wrap",fullZipUpload:"snc-full_zip_upload",fullZipMax:"snc-full_zip_upload__max"},this.config=window.tincannyZipUploadData||{},this.addEventListeners()}addEventListeners(){var i=this,t=(document.addEventListener("tincanny-zip-uploader-event",t=>{t=t.detail||{};t.action&&(parseInt(i.config.debug)&&console.log({action:"tincanny-zip-uploader-event-media.js",detail:t}),"registered-tincanny-module"===t.action&&t.success&&i.handleUploadSuccess(t),"upload-started-tincanny-zip"===t.action&&i.setConfigItem("directory",t.directory),"cancel-tincanny-module-upload"===t.action)&&i.handleCancelledUpload(t)}),document.addEventListener("click",t=>{var e;t.target.matches(".snc-file_upload_button_wrapper button")?i.enableButton&&(i.setSettings(i),(e=t.target.closest(".snc-file_upload_button_wrapper").querySelector('input[type="file"]')).click(),e.onchange=t=>{var e=i.getElByID(i.ids.contentID);i.showLoading(),i.triggerZipUploaderEvent({action:"upload-tincanny-zip",uploadWrapperID:i.ids.uploadWrapperId,file:t.target.files[0],contentID:e?e.value:"",settings:i.getConfig("settings")}),t.target.value=null}):t.target.matches("#tab-snc-library a")?i.maybeCleanUpAbortedUploads(i):t.target.matches("#"+this.ids.fullZipUpload)&&i.setSettings(i)}),i.isIframe?window.parent.jQuery:i.$);t("#TB_closeWindowButton, #TB_overlay").click(function(){i.maybeCleanUpAbortedUploads(i)}),t(document).on("keydown",function(t){"Escape"!==t.key&&27!==t.keyCode||(t.preventDefault(),t.stopPropagation())})}getElByID(t){t=document.getElementById(t);return!(!t||null===t)&&t}showLoading(){this.enableButton=!1,this.show(this.ids.uploadWrapperId),this.hide(this.ids.buttonWrapId),this.hide(this.ids.settingsWrapID)}hideLoading(){this.enableButton=!0,this.show(this.ids.buttonWrapId),this.show(this.ids.settingsWrapID),this.hide(this.ids.uploadWrapperId),this.setConfigItem("directory","")}hide(t){t=this.getElByID(t);t&&(t.style.display="none")}show(t){t=this.getElByID(t);t&&(t.style.display="block")}setAttribute(t,e,i){t=document.querySelector(t);t&&t.setAttribute(e,i)}triggerZipUploaderEvent(t){t=new CustomEvent("tincanny-zip-uploader-event",{detail:t});document.dispatchEvent(t)}handleUploadSuccess(t){this.setConfigItem("directory","");var e,i=this.getElByID(this.ids.parentId);i&&(e=i.querySelector("#no_tab"),i=i.querySelector("#no_refresh"),e&&(i?self.parent.tb_remove():window.parent.location=window.parent.location.href),this.key&&"undefined"!==this.key?(this.setAttribute("#vc_properties-panel .vc-snc-trigger input","value",t.id),this.setAttribute("#vc_properties-panel .vc-snc-name input","value",t.title),trigger_vc_snc_mode()):(null!==(e=document.querySelector(".snc-embed_information"))&&(e.style.display="block",this.hide(this.ids.parentId)),this.setAttribute("a.delete-media","data-item_id",t.id),this.setAttribute("input#item_id","value",t.id),this.setAttribute("input#item_title","value",t.title)))}handleCancelledUpload(){this.hideLoading()}maybeCleanUpAbortedUploads(t){var e,i=t.getConfig("directory");""!==i&&(e=window.top.tincannyZipUploadData,t.setConfigItem("directory",""),jQuery.ajax({method:"POST",data:{action:"cancel-tincanny-module-upload",directory:i,status:"abort",fullzip:t.isfullZipUpload(t),security:e.nonce},url:e.rest_url+e.rest_namespace,beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",e.rest_nonce)}}))}isfullZipUpload(t){t=t.getElByID(t.ids.fullZipUpload);return!!t&&t.checked?1:0}setSettings(t){var e=t.getConfig("settings"),t=((e=e||{}).fullZipUpload=t.isfullZipUpload(t),t.setConfigItem("settings",e),t.getElByID(t.ids.fullZipMax));t&&(t.style.display=e.fullZipUpload?"block":"none")}getConfig(t){return void 0===window.top.tincannyZipUploadData&&(console.log("window.top.tincannyZipUploadData is undefined"),window.top.tincannyZipUploadData=this.config),t&&void 0!==t?"string"==typeof t&&window.top.tincannyZipUploadData[t]||"":window.top.tincannyZipUploadData}setConfigItem(t,e){void 0===window.top.tincannyZipUploadData&&(console.log("window.top.tincannyZipUploadData is undefined"),window.top.tincannyZipUploadData=this.config),window.top.tincannyZipUploadData[t]=e}}jQuery(document).ready(t=>{tincannyMediaUpload=new TincannyMediaUploadClass(t,!1)});
//# sourceMappingURL=admin.min.js.map
